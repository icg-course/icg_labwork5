<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8" />

    <script src="https://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type='text/javascript' src='https://www.x3dom.org/download/dev/x3dom-full.js'> </script>
    <link rel='stylesheet' type='text/css' href='https://www.x3dom.org/download/x3dom.css' />

    <script lang="javascript">

        $(document).load(() => {
            $('#screen').click(() => {
                $('#wallpep').attr('url', 'wallpep.jpg')
            })
 
            $('#start').click(() => {                
                $('#timesensor').attr('enabled', 'true')
            })

            $('#stop').click(() => { 
                $('#timesensor').attr('enabled', 'false')
            })

            $('#mstart').click(() => {                
                $('#mtimesensor').attr('enabled', 'true')
            })

            $('#mstop').click(() => { 
                $('#mtimesensor').attr('enabled', 'false')
            })
        })

    </script>
</head>

<body
    style='width:100%; height:100%; border:0; margin:0; padding:0; background: url("office.jpg") no-repeat fixed; background-size: cover; background-position: center;'>

    <form action="">
        <input id='start' type="button" value="Гадать"></input>
        <input id='mstart' type="button" value="Настройка монитора"></input>
        <input id ='mstop' type="button" value="Монитор настроен"></input>
        <input id ='stop' type="button" value="Прекратить гадание"></input>
    </form>

    <X3D width="100vw" height="100vh">

        <Scene>



            <NavigationInfo avatarSize='[ 0.25, 1.6, 0.75 ]' bind='false' explorationMode='all' headlight='false'
                isActive='false' metadata='X3DMetadataObject' reverseScroll='false' speed='1.0' transitionTime='1.0'
                transitionType='["LINEAR"]' type='[ANY]' typeParams='[-0.4,60,0.05,2.8]' visibilityLimit='0.0'>
            </NavigationInfo>

            <Viewpoint position="6.82442 5.15480 11.29368" orientation="-0.51173 0.85340 0.09919 0.62690" zNear="0"
                zFar="150" centerOfRotation="0.00000 0.00000 0.00000" fieldOfView="0.78540"
                description="defaultX3DViewpointNode"></Viewpoint>

            <collision>
                <transform>
                    <shape>
                        <box size='8 0.5 4'></box>
                        <appearance>
                            <imagetexture url='table.jpg'></imagetexture>
                        </appearance>
                    </shape>
                </transform>


                <!-- TRIANGLE -->
            <transform DEF='Panim'>
            <transform translation='0 0.25 0'>
                <transform  scale='0.2 0.2 0.2'>
                    <shape>
                        <IndexedTriangleSet index="0 1 2 0 2 3 0 3 4 0 4 1" solid="false">
                            <Coordinate point="0 3 0, -2 0 0, 0 0 2, 2 0 0, 0 0 -2">
                            </Coordinate>

                            <ColorRGBA color=" 0.75 0.75 0.75 1, 0.75 0.75 0.75 1, 0.75 0.75 0.75 1,
                                    0.75 0.75 0.75 1 , 0.75 0.75 0.75 1">
                            </ColorRGBA>
                        </IndexedTriangleSet>
                        <Appearance>
                            <ImageTexture url="8.jpg"></ImageTexture>
                            <texturetransform></texturetransform>
                        </Appearance>
                    </shape>
                </transform>
            </transform>
            </transform>

                <!-- FACE  -->
                <group DEF='monitor'>

                    <transform DEF='Manim'>
                    <transform translation='1 0 -1'>    

                        <transform>
                            <shape>
                                <appearance>
                                    <imagetexture url='plast.jpg'></imagetexture>
                                </appearance>
                                <IndexedFaceSet ccw="true" colorPerVertex="true" convex="true" creaseAngle="0"
                                    solid="false" coordIndex="1 5 6 2 -1 2 6 7 3 -1 3 7 8 4 -1 4 8 5 1 -1 9 10 14 13 -1 14 10 11 15 -1 15 16 12 11 -1 12 16 13 9 -1
                                        1 9 10 2 -1 2 3 11 10 -1 3 4 12 11 -1 4 1 9 12 -1 "
                                    colorIndex="1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1">
                                    <Coordinate
                                        point="0 0 0, -4 1 0, -4 3.5 0, 0 3.5 0, 0 1 0, -3.8 1.2 0, -3.8 3.3 0, -0.2 3.3 0, -0.2 1.2 0,
                                            -4 1 -0.25, -4 3.5 -0.25, 0 3.5 -0.25, 0 1 -0.25, -3.8 1.2 -0.25, -3.8 3.3 -0.25, -0.2 3.3 -0.25, -0.2 1.2 -0.25 ">
                                    </Coordinate>
                                    <Color color="0 0 0, 1 0 0, 0 1 0, 0 0 1"></Color>
                                </IndexedFaceSet>
                            </shape>
                        </transform>



                        <transform>
                            <shape>
                                <appearance>
                                    <imagetexture url='plast2.jpg'></imagetexture>
                                </appearance>
                                <IndexedFaceSet ccw="true" colorPerVertex="true" convex="true" creaseAngle="0"
                                    solid="false" coordIndex="1 5 6 2 -1 2 6 7 3 -1 3 7 8 4 -1 4 8 5 1 -1 5 6 7 8 -1"
                                    colorIndex="1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1 1 2 3 1 -1">
                                    <Coordinate
                                        point="0 0 0, -3.8 1.2 -0.25, -3.8 3.3 -0.25, -0.2 3.3 -0.25, -0.2 1.2 -0.25, -3 1.5 -1, -3 2.5 -1, -1 2.5 -1, -1 1.5 -1">
                                    </Coordinate>
                                    <Color color="0 0 0, 1 0 0, 0 1 0, 0 0 1"></Color>
                                </IndexedFaceSet>
                            </shape>
                        </transform>

                        <transform translation='-2 2.25 0'>
                            <shape>
                                <plane id='screen' size='3.6 2.1'></plane>
                                <appearance>
                                    <imagetexture id='wallpep' url='wallpep2.jpg'></imagetexture>
                                </appearance>
                            </shape>
                        </transform>
                    </transform>
                    </transform>

                    <transform translation='1 0 -1'>
                        <transform translation='-2.75 0.02 -1'>
                            <shape>
                                <ElevationGrid xDimension="4" zDimension="4"
                                    height="0.25 0.25 0.25 0.25 0.25 1.5 1.5 0.25 0.25 0.5 0.5 0.25 0.25 0.25 0.25 0.25 "
                                    xSpacing="0.5" zSpacing="0.5" solid="false">
                                </ElevationGrid>
                                <appearance>
                                    <imagetexture url='plast.jpg'></imagetexture>
                                </appearance>
                            </shape>
                        </transform>

                    </transform>

                </group>

                <transform>
                    <inline url='pc.x3d'></inline>
                </transform>

                <Group DEF="Light">
                    <PointLight ambientIntensity='0' attenuation='1,0,0' color='1, 0, 0' global='true' intensity='1'
                        location='-2 3 -1' on='true' radius='10' shadowFilterSize='2' shadowIntensity='0.3'
                        shadowMapSize='1024' shadowOffset='0' zFar='-1' zNear='-1'></PointLight>

                    <DirectionalLight ambientIntensity='0' color='1, 1, 1' direction='0.5, -1, -1' global='true'
                        intensity='0.5' on='true' shadowCascades='1' shadowFilterSize='1' shadowIntensity='0.7'
                        shadowMapSize='2024' shadowOffset='0' shadowSplitFactor='1' shadowSplitOffset='1'>
                    </DirectionalLight>

                    <SpotLight ambientIntensity='0' attenuation='1,0,0' beamWidth='1.5708' color='1, 1, 1'
                        cutOffAngle='3.14' direction='0, 0.5, -1' global='true' intensity='1' location='-2.5, 2, 10,'
                        radius='100' shadowCascades='1' shadowFilterSize='2' shadowIntensity='0.5' shadowMapSize='1024'>
                    </SpotLight>
                    <Fog bind='false' color='(1,1,1)' fogType='"LINEAR"' isActive='false' metadata='X3DMetadataObject'
                        visibilityRange='0'></Fog>
                </Group>

            </collision>

            <!-- анимация -->

            <TimeSensor id='timesensor' DEF='Time' cycleInterval='2' loop='true' enabled="false"></TimeSensor>

            <TimeSensor id='mtimesensor' DEF='Mtime' cycleInterval='4' loop='true' enabled="false"></TimeSensor>



            <PositionInterpolator DEF="PosInt" key="0 0.23 0.5 0.75 1"
                keyValue="0 0 0, 0 -0.15 0, 0 0.15 0, 0 -0.15 0, 0 0 0">
            </PositionInterpolator>
            <PositionChaser DEF='Chaser' duration='2'> </PositionChaser>

            <ROUTE fromNode="Mtime" fromField="fraction_changed" toNode="PosInt" toField="set_fraction"></ROUTE>
            <ROUTE fromNode="PosInt" fromField="value_changed" toNode="Chaser" toField="set_destination"></ROUTE>
            <ROUTE fromNode="Chaser" fromField="value_changed" toNode="Manim" toField="set_translation"></ROUTE>



            <OrientationInterpolator DEF="OrientInt" key="0 0.5 1" keyValue="0 1 0 0, 0 1 0 3.14, 0 1 0 6.28">
            </OrientationInterpolator>
            <OrientationDamper DEF='Damper' duration='3' tau='0.2'></OrientationDamper>

            <ROUTE fromNode="Time" fromField="fraction_changed" toNode="OrientInt" toField="set_fraction">
            </ROUTE>
            <ROUTE fromNode="OrientInt" fromField="value_changed" toNode="Damper" toField="set_destination"></ROUTE>
            <ROUTE fromNode="Damper" fromField="value_changed" toNode="Panim" toField="set_rotation">
            </ROUTE>



            <transform>
                <shape>
                    <pointset>
                        <color color='0 0 0, 0 0 0, 0 0 0,'></color>
                        <coordinate point='-8 4 0, 0 4 0, 3 4 0'></coordinate>
                    </pointset>
                </shape>
            </transform>




        </Scene>
    </X3D>

</body>

</html>