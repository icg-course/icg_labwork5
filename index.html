<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>laba1</title>
    <script src="http://www.x3dom.org/download/dev/x3dom.js"></script>
    <link rel="stylesheet" href="http://www.x3dom.org/download/dev/x3dom.css" />
    <script type="text/javascript">
        function toggle(e){//передаем событие event
            if(timeSensor.getAttribute('enabled') == 'false'){//проверяем TimeSensor
                timeSensor.setAttribute('enabled','true')//запускаем анимацию  
                e.target.textContent = 'Остановить'
            }else{
                timeSensor.setAttribute('enabled','false')//останавливаем анимацию 
                e.target.textContent = 'Закрутить '
            }
        }
        
        function showElem(e){//передаем событие event 
            const elemName = document.querySelector('.elem-name')//находим елемент куда будем вставлять текст 
            elemName.textContent = `Вы выбрали элемент с названием ${e.target.dataset.name}`//собщение которое вставляем
        }
    </script>
</head>
<body>
    <h4 class="elem-name"></h4>
    <button onclick="toggle(event)">Остановить</button>
    <x3d width="70vw" height="70vh">
        <scene>
            <!-- пламя -->
             <TimeSensor DEF="Time" cycleInterval="5" loop="true"> </TimeSensor>
            <ColorInterpolator DEF="ColInt" key="0 .5 1"
            keyValue="1 0 0, 1 .4 0, 1 0 0">
            </ColorInterpolator> 
            
            <!-- земля -->
            
            <OrientationInterpolator DEF="OrientInt" key="0 0.5 1"
            keyValue="0 1 0 0,0 1  0 -3.14, 0 1 0 -6.28">
            </OrientationInterpolator> 
            <OrientationChaser DEF="ea" duration="4"></OrientationChaser>
            <TimeSensor DEF="Time" id="timeSensor" cycleInterval="10" loop="true" enabled="true"></TimeSensor>
            <PositionInterpolator DEF="PosInt" key="0 0.25 0.5 0.75 1"
                keyValue="5 3 6, 10 1 -6, -12 2 -6, -15 4 6,5 3 6">
            </PositionInterpolator>
            <PositionChaser DEF="PC" duration="1"></PositionChaser>

            

            <transform DEF="Trans" translation="0 0 0" onclick="showElem(event)">
                <Transform DEF="Trans2" translation="0 0 0">
                <shape data-name="Земля">
                    <appearance>
                        <imagetexture url="./2k_earth_daymap.jpg"></imagetexture>
                        <texturetransform scale="1 1"></texturetransform>
                        <material diffuseColor="#140c03"></material>
                    </appearance>
                    <sphere radius="3.8" id="earth" > </sphere>
                </shape>
                    </Transform>
            </transform>
        


            <transform translation="-2.7 5 2.35" rotation ="0 0 1 0" onclick="showElem(event)">
                <shape data-name="Ракета">
                    <appearance>
                        <imagetexture url="./e084a38fec0513346b01c0f7666ca669.jpg"></imagetexture>
                        <texturetransform scale="1 1"></texturetransform>
                    </appearance>
                    <cylinder  height="1" Radius = "0.2"> </cylinder>
                </shape>
            </transform>

            <transform onclick="showElem(event)" translation="-2.7 4.4 2.35" rotation ="0 0 1 0" >
                <shape data-name="Ракета">
                    <appearance>
                        <imagetexture url="./e084a38fec0513346b01c0f7666ca669.jpg"></imagetexture>
                        <texturetransform scale="1 1"></texturetransform>
                    </appearance>
                   <box size="0.4 0.2 0.4"></box>
                </shape>
            </transform>
         
            <transform onclick="showElem(event)" DEF="Bounce" translation="0 0 0">
                <shape data-name="Луна">
                    <appearance>
                        <imagetexture url="./2k_moon.jpg"></imagetexture>
                        <texturetransform scale="1 1"></texturetransform>
                        <material diffuseColor="#140c03"></material>
                    </appearance>
                    <sphere radius="1" > </sphere>
                </shape>
            </transform>
            <transform onclick="showElem(event)" translation="-2.7 5.65 2.35" rotation="1 0 0 0">
                <shape data-name="Ракета">
                    <appearance>
                        <imagetexture url="./red-texture-closeup.jpg"></imagetexture>
                        <texturetransform scale="1 1"></texturetransform>
                        
                    </appearance>
                    <cone bottomRadius="0.2" height="0.3" > </cone>
                </shape>
            </transform>
            <!-- огонь -->
            <transform onclick="showElem(event)" translation="-2.7 4.2 2.35" rotation ="1 0 0 0">
                <shape data-name="Ракета">
                    <appearance>
                        <material DEF="Mat" diffuseColor="1 0 0" id="flameMat"></material>
                    </appearance>
                    <cone bottomRadius="0.2" height="0.4" id="flame"> </cone>
                </shape>
            </transform>
            <!-- огонь -->
            <transform onclick="showElem(event)" translation="0 0 0.5" rotation ="0 4 0 0">
                <shape data-name="Кольцо">
                    <appearance>
                        <imagetexture url="./2k_saturn.jpg"></imagetexture>
                        <texturetransform scale="1 1"></texturetransform>
                    </appearance>
                    <torus outerRadius="5" innerRadius="0.5"> </torus>
                </shape>
            </transform>
            <Background DEF='Summer'
                backUrl="2k_stars_milky_way.jpg"
                skyAngle='0.8,
                1.3,
                1.5708'
                skyColor='0 0 0.1,
                0 0 0.2,
                0 0 0.4'
                groundAngle='0.4,
                1.2,
                1.5708'
                groundColor='0 0 0.1,
                0 0 0.15,
                0 0 0.542,
                0 0 0.669'/>

<!--             <Viewpoint position="-6.06334 4.20531 6.74917" orientation="-0.51196 -0.84732 -0.14121 0.83887" 
                centerOfRotation="0.00000 0.00000 0.00000" fieldOfView="0.78540" description="defaultX3DViewpointNode"></Viewpoint>  -->
            <!-- огонь -->
            <ROUTE fromNode="Time" fromField="fraction_changed"
                toNode="ColInt" toField="set_fraction"></ROUTE>
            <ROUTE fromNode="ColInt" fromField="value_changed"
                toNode="Mat" toField="set_diffuseColor"></ROUTE>
            <!-- луна -->
            <ROUTE fromNode="Time" fromField="fraction_changed"
                toNode="PosInt" toField="set_fraction"></ROUTE>
            <ROUTE fromNode="PosInt" fromField="value_changed"
                toNode="Bounce" toField="set_translation"></ROUTE>
           
            <ROUTE fromNode="PosInt" fromField="value_changed"
                toNode="PC" toField="set_destination"></ROUTE>
            <ROUTE fromNode="PC" fromField="value_changed"
                toNode="Bounce" toField="set_translation"></ROUTE>



                <!-- земля -->
                <ROUTE fromNode="OrientInt" fromField="value_changed"
                    toNode="ea" toField="set_destination"></ROUTE>
                <ROUTE fromNode="ea" fromField="value_changed"
                    toNode="Trans2" toField="set_rotation"></ROUTE>
                <ROUTE fromNode="Time" fromField="fraction_changed"
                    toNode="OrientInt" toField="set_fraction"></ROUTE>
                <ROUTE fromNode="OrientInt" fromField="value_changed"
                    toNode="Trans" toField="set_rotation"></ROUTE>

        </scene>
    </x3d>
    <script src="https://code.jquery.com/jquery-1.8.3.min.js"></script>
 <script src="https://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
</body>
</html>

